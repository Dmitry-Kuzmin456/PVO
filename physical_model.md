Вот подробное описание физической модели и всех сил, реализованных в проекте, основанное на анализе кода `models.py`.

# Физическая модель симуляции ракеты

В проекте реализована физическая модель движения тела с переменной массой в трехмерном пространстве (3 DoF — 3 Degrees of Freedom). Интеграция уравнений движения выполняется численным методом Рунге-Кутты 4-го порядка (RK4) для обеспечения высокой точности.

Основное уравнение динамики, используемое в симуляции (Второй закон Ньютона):

$$ \vec{a}(t) = \frac{\sum \vec{F}}{m(t)} $$

Где $\sum \vec{F}$ — векторная сумма всех действующих сил.

---

## 1. Сила тяги (Thrust Force)

Тяга — это сила, создаваемая двигателем ракеты. В данной модели она считается постоянной по величине, но действует ограниченное время.

*   **Условие действия:** Действует только пока время полета меньше времени работы двигателя (`burn_time`) и пока есть топливо (`fuel_remaining > 0`).
*   **Направление:** Вектор тяги **фиксирован** в момент запуска (`launch_direction`). Ракета не имеет системы активного наведения в полете, поэтому вектор тяги не поворачивается вслед за изменением траектории.
*   **Формула:**
    $$ \vec{F}_{thrust} = T \cdot \hat{n}_{launch} $$
    *   $T$ — сила тяги в Ньютонах (`thrust`).
    *   $\hat{n}_{launch}$ — единичный вектор направления запуска.

## 2. Сила тяжести (Gravitational Force)

Сила притяжения Земли, действующая вертикально вниз.

*   **Направление:** Строго вниз по оси Z ($0, 0, -1$).
*   **Зависимость:** Зависит от текущей массы ракеты, которая уменьшается по мере выгорания топлива.
*   **Формула:**
    $$ \vec{F}_{gravity} = m(t) \cdot \vec{g} $$
    *   $m(t)$ — текущая масса ракеты.
    *   $\vec{g} = (0, 0, -9.81) \, м/с^2$.

## 3. Аэродинамическое сопротивление (Aerodynamic Drag)

Сила сопротивления воздуха, возникающая при движении ракеты в атмосфере. Это единственная сила в модели, которая учитывает влияние ветра.

*   **Направление:** Противоположно вектору *относительной* скорости ракеты (скорость ракеты относительно воздуха).
*   **Особенности:** Используется квадратичная зависимость от скорости.
*   **Учет ветра:** Расчет ведется относительно вектора ветра $\vec{W}$.
*   **Формула:**
    $$ \vec{F}_{drag} = -\frac{1}{2} \rho C_d A |\vec{v}_{rel}| \vec{v}_{rel} $$
    *   $\vec{v}_{rel} = \vec{v}_{rocket} - \vec{W}$ — скорость ракеты относительно ветра.
    *   $\rho$ (rho) — плотность воздуха (константа $1.225 \, кг/м^3$).
    *   $C_d$ — коэффициент аэродинамического сопротивления (`drag_coeff`).
    *   $A$ — площадь поперечного сечения ракеты (`area`).

## 4. Сила Кориолиса (Coriolis Force)

Инерциальная сила, учитывающая вращение Земли. В модели реализован расчет этой силы в зависимости от широты (используется широта Нью-Йорка).

*   **Физический смысл:** Отклоняет движущиеся объекты вправо в Северном полушарии (или влево в Южном). Становится заметной при больших скоростях и дистанциях.
*   **Реализация:** Вектор угловой скорости Земли раскладывается на компоненты в зависимости от широты $\phi$.
*   **Формула:**
    $$ \vec{F}_{coriolis} = -2 m(t) (\vec{\Omega} \times \vec{v}) $$
    *   $\vec{\Omega}$ — вектор угловой скорости вращения Земли.
        *   $\Omega_x = 0$
        *   $\Omega_y = \Omega_{earth} \cdot \cos(\phi)$
        *   $\Omega_z = \Omega_{earth} \cdot \sin(\phi)$
    *   $\vec{v}$ — вектор скорости ракеты.
    *   $\times$ — векторное произведение.

---

## Дополнительные параметры модели

### Переменная масса (Variable Mass)
Масса ракеты не является константой. Она рассчитывается на каждом шаге симуляции:
$$ m(t) = m_{empty} + m_{fuel}(t) $$
*   Расход топлива происходит линейно: $\frac{dm}{dt} = -\frac{m_{fuel\_total}}{t_{burn}}$.
*   Это влияет на ускорение от всех сил, кроме гравитации (так как в гравитации масса сокращается при расчете ускорения $g$, но важна для суммы сил).

### Ветер (Wind)
Ветер задается как трехмерный вектор $(W_x, W_y, 0)$. В данной реализации он влияет только на силу аэродинамического сопротивления, сдвигая ракету с идеальной траектории, если ветер меняется после расчета пуска.

---

## Итоговое уравнение движения

Суммируя все вышесказанное, ускорение ракеты на каждом временном шаге вычисляется так:

$$ \vec{a} = \frac{\vec{F}_{thrust} + \vec{F}_{gravity} + \vec{F}_{drag}(\vec{W}) + \vec{F}_{coriolis}}{m(t)} $$